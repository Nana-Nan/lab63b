# การทดลองที่ 4 เรื่อง การเขียนโปรแกรมอินพุทสัญญาณดิจิทัล

## วัตถุประสงค์
1. เพื่อเขียนโปรแกรมลงในไมโครคอนโทรลเลอร์ให้รับสัญญาณ input จากภายนอก
2. เพื่อนำไมโครคอนโทรลเลอร์ที่ลงโปรแกรมแล้วไปใช้งาน

## อุปกรณ์ที่ใช้
1. ไมโครคอนโทรลเลอร์ ESP-01

   ![Image](https://cdn-images-1.medium.com/max/1200/1*RMM4luR-BC8yrsDbmSlkBA.png)

2. USB to serial port

   ![Image](https://daneshjookit.com/5924-home_default/esp8266-to-usb.jpg)

3. อุปกรณ์ต่อพ่วง USB
4. อุปกรณ์เขียนโปรแกรม เช่น คอมพิวเตอร์ โน้ตบุ๊ค ฯลฯ
5. Adapter ต่อสายพ่วงกับ LED
6. เซนเซอร์แสงกับตัวต้านทาน

## ศึกษาข้อมูลเบื้องต้น

## วิธีการทำการทดลอง
1. เริ่มจากการต่อ USB to serial port เข้ากับคอมพิวเตอร์โดยอุปกรณ์พ่วง USB และต่อ USB to serial port เข้ากับ Adapter สุดท้ายต่อ Adapte เข้ากับไมโครคอนโทรลเลอร์

   ![Image](https://github.com/Nana-Nan/image/blob/main/3-1.jpg)

2. เปิด command prompt เข้าไปยังโฟลเดอร์ที่มีตัวอย่างโปรแกรม โดยในที่นี้จะใช้ตัวอย่าง 04_Input-Port

3. อัปโหลดโปรแกรมลงในไมโครคอนโทรเลอร์ โดยใช้คำสั่ง **pio run -t upload**

   ![Image](https://github.com/Nana-Nan/image/blob/main/4-1.jpg)

4. ในขณะที่โปรแกรมกำลังรัน ให้ไปกดที่ปุ่มดำของบอร์ดค้างไว้ แล้วกดปุ่มแดง 1 ครั้งเพื่อรีเซ็ท

   ![Image](https://github.com/Nana-Nan/image/blob/main/4-2.jpg)

5. เมื่อโปรแกรมรันเสร็จให้ใช้คำสั่ง pio device monitor เพื่อดูผลลัพธ์ที่แสดงผลออกมาจากคอมพิวเตอร์ บันทึกผล

   ![Image](https://github.com/Nana-Nan/image/blob/main/4-3.jpg)

6. นำสายไฟเส้นสีขาว(input) จิ้มไปที่สีดำ บันทึกผล

7. นำสายไฟเส้นสีขาว(input) จิ้มไปที่สีแดง บันทึกผล

8. กดปุ่มสีดำ บันทึกผล

9. นำเซนเซอร์แสงต่อกับตัวต้านทาน ไปต่อกับพอร์ตดังภาพ

   ![Image](https://github.com/Nana-Nan/image/blob/main/4-8.jpg)

10. นำสายสีขาว(input) ต่อกับพอร์ตตรงกลางระหว่างสีแดงกับสีดำ บันทึกผล
11. ปิดหน้าสัมผัสเซนเซอร์แสง บันทึกผล

## การบันทึกผลการทดลอง
* เมื่อโปรแกรมรันเสร็จให้ใช้คำสั่ง pio device monitor เพื่อดูผลลัพธ์ที่แสดงผลออกมาจากคอมพิวเตอร์ 

   ![Image](https://github.com/Nana-Nan/image/blob/main/4-4.jpg)

* นำสายไฟเส้นสีขาว(input) จิ้มไปที่สีดำ 

   ![Image](https://github.com/Nana-Nan/image/blob/main/4-5.jpg)

* นำสายไฟเส้นสีขาว(input) จิ้มไปที่สีแดง 

   ![Image](https://github.com/Nana-Nan/image/blob/main/4-6.jpg)

* กดปุ่มสีดำ บันทึกผล

   ![Image](https://github.com/Nana-Nan/image/blob/main/4-7.jpg)

* นำสายสีขาว(input) ต่อกับพอร์ตตรงกลางระหว่างสีแดงกับสีดำ 

   ![Image](https://github.com/Nana-Nan/image/blob/main/4-9.jpg)

* ปิดหน้าสัมผัสเซนเซอร์แสง 

   ![Image](https://github.com/Nana-Nan/image/blob/main/4-10.jpg)

## อภิปรายผลการทดลอง

   พิจารณาจากโปรแกรม input จะอ่านค่าแบบดิจิทัลจากสายสีขาว และ output เป็นสายสีเหลืองที่ต่อกับหลอดไฟ LED เมื่อ input มีค่าเป็นหนึ่งหลอดไฟจะดับ และ เมื่อ input มีค่าเป็นศูนย์หลอดไฟจะติด 
   
   จากการทดลอง เมื่อผู้ทดลองรันโปรแกรม หรือนำสายสีขาวไปจิ้มที่สายสีแดง จะอ่านค่าเป็นหนึ่ง ทำให้หลอดไฟดับ และเมื่อนำสายสีขาวไปต่อสายดำ หรือเมื่อกดปุ่มดำ จะอ่านค่าเป็นศูนย์ ทำให้หลอดไฟติด
   
   จากการทดลองนำเซนเซอร์แสงกับตัวต้านทาน มาต่อเข้าพอร์ต เมื่อนำเซนเซอร์หันเข้าหาแสง ทำให้อ่านค่าเป็นศูนย์ หลอดไฟติด และเมื่อเอานิ้วบังเซนเซอร์ ทำให้อ่านค่าเป็นศูนย์ หลอดไฟดับ

## คำถามหลังการทดลอง
* จงอธิบายว่าทำไมเมื่อนำสายไฟสีขาวไปจิ้มที่สายไฟสีดำหลอดไฟจึงติด

   ตอบ เนื่องจากโปรแกรมเป็นการอ่านค่าแบบดิจิทัล คือมีค่าเป็น 0 และ 1 เท่านั้น โดยที่สายไฟสีดำเป็นสาย ground ค่าแรงดันไฟฟ้าเท่ากับศูนย์ เมื่อนำสายไฟสีขาวไปจิ้มจึงแสดงค่าเป็น 0 ทำให้หลอดไฟติด
